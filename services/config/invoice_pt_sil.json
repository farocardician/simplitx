{
  "enabled": true,
  "document": { "type": "invoice", "vendor": "PT Silesia", "version": "1" },
  "stages": [
    { "script": "s01_tokenizer.py",
      "args": ["--in", "{pdf}", "--out", "{tokens}"]
    },
    { "script": "s02_normalizer.py",
      "args": ["--in", "{tokens}", "--out", "{normalized}"]
    },
    { "script": "s03_segmenter.py", "config": "s03_invoice_sil_segmenter_v1.json",
      "args": ["--in", "{normalized}", "--out", "{segments}", "--tokenizer", "plumber", "--config", "{config}", "--overlay", "{pdf}"]
    },
    { "script": "s06_line_items_from_cells_silesia.py",
      "args": ["--input", "{normalized}", "--out", "{items}"]
    },
    { "script": "s07_extractor.py", "config": "s07_invoice_sil_extractor_v1.json",
      "args": ["--tokens", "{normalized}", "--tokenizer", "plumber", "--segments", "{segments}", "--config", "{config}", "--out", "{fields}"]
    },
    { "script": "s08_validator.py",
      "args": ["--stage7", "{fields}", "--items", "{items}", "--out", "{validation}"]
    },
    { "script": "s09_confidence.py",
      "args": ["--stage7", "{fields}", "--items", "{items}", "--validation", "{validation}", "--out", "{confidence}", "--tokens", "{normalized}", "--tokenizer", "plumber"]
    },
    { "script": "s10_parser.py", "config": "s10_invoice_sil_parser_v1.json",
      "args": ["--fields", "{fields}", "--items", "{items}", "--validation", "{validation}", "--confidence", "{confidence}", "--cells", "{normalized}", "--final", "{final}", "--manifest", "{manifest}", "--config", "{config}"]
    }
  ],
  "json2xml": {
    "profiles": {
      "default": {
        "mapping": "mappings/pt_sil_invoice_v1.json",
        "converter": {
          "module": "json2xml.converter",
          "callable": "convert_json_to_xml"
        }
      }
    }
  }
}
