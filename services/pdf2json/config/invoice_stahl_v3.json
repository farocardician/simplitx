{
  "name": "Invoice Stahl",
  "version": "3",
  "header_aliases": {
    "NO": [
      "NO"
    ],
    "HS": [
      "HS",
      "HS CODE",
      "HSCODE"
    ],
    "DESC": [
      "DESC",
      "DESCRIPTION",
      "DESCRIPTION OF GOODS",
      "GOODS"
    ],
    "QTY": [
      "QTY",
      "QUANTITY"
    ],
    "UOM": [
      "PCS",
      "UNIT",
      "UOM"
    ],
    "PRICE": [
      "PRICE",
      "UNIT COST",
      "UNIT PRICE"
    ],
    "AMOUNT": [
      "AMOUNT",
      "AMOUNT IDR",
      "LINE TOTAL",
      "TOTAL"
    ],
    "AMOUNT_EXCL_TAX": [],
    "AMOUNT_INCL_TAX": [],
    "BATCH": [],
    "CODE": [],
    "CURRENCY": [],
    "DISCOUNT": [],
    "GL_CODE": [],
    "PERIOD": [],
    "SERIAL": [],
    "SKU": [],
    "TAX": [],
    "TAX_RATE": [],
    "UNIT_PRICE_EXCL_TAX": [],
    "UNIT_PRICE_INCL_TAX": [],
    "BRUTO_KG": [],
    "BERSIH_KG": []
  },
  "totals_keywords": [
    "AMOUNT DUE",
    "BASIS PAJAK",
    "DASAR PAJAK",
    "DPP",
    "GRAND TOTAL",
    "Grand Total incld. VAT 12%",
    "PPN",
    "SUB TOTAL",
    "SUBTOTAL",
    "TOTAL",
    "TOTAL TAX BASED",
    "VAT",
    "VAT 12%",
    "VAT12%"
  ],
  "currency_hints": [
    "IDR",
    "RP",
    "USD"
  ],
  "uom_hints": [
    "KG",
    "PCS"
  ],
  "camelot": {
    "flavor_order": [
      "lattice",
      "stream"
    ],
    "line_scale": 40,
    "line_scale_stream": 15
  },
  "header_block_margin": 0.02,
  "stop_after_totals": true,
  "stage5": {
    "column_types": {
      "by_family": {
        "QTY": "number",
        "PRICE": "number",
        "UNIT_PRICE": "number",
        "AMOUNT": "number",
        "AMOUNT_EXCL_TAX": "number",
        "AMOUNT_INCL_TAX": "number",
        "TAX": "number",
        "DISCOUNT": "number",
        "NO": "integer",
        "HS": "text",
        "DESC": "text",
        "SKU": "text",
        "CODE": "text",
        "UOM": "text",
        "BATCH": "text",
        "SERIAL": "text"
      },
      "by_position": {
        "COL3": "number",
        "COL7": "currency"
      },
      "date_columns": [
        "INVOICE_DATE",
        "CONTRACT_DATE",
        "DELIVERY_DATE"
      ],
      "currency_columns": [
        "PRICE",
        "UNIT_PRICE",
        "AMOUNT",
        "TAX",
        "DISCOUNT",
        "COL7"
      ]
    },
    "number_format": {
      "decimal": ".",
      "thousands": ",",
      "allow_parens": true
    },
    "date_formats": {
      "input_patterns": [
        "YYYY-MM-DD",
        "DD-MM-YYYY",
        "MM/DD/YYYY"
      ],
      "output_format": "YYYY-MM-DD",
      "century_cutoff": 50
    }
  },
  "stage6": {
    "index_fallback": {
      "COL1": "NO",
      "NO": "DESC",
      "COL6": "PRICE",
      "COL5": "QTY",
      "COL7": "AMOUNT"
    },
    "required_families": {
      "must_have_any": [
        "PRICE",
        "DESC"
      ],
      "id_field": "NO"
    },
    "row_filters": {
      "drop_if_matches": [
        "SUBTOTAL",
        "TOTAL",
        "VAT",
        "DPP",
        "GRAND TOTAL",
        "NOTE",
        "TERMS"
      ]
    },
    "number_format": {
      "decimal": ".",
      "thousands": ",",
      "allow_parens": true
    },
    "derivation": {
      "fill_amount_from_qty_price": true,
      "fill_unit_price_from_amount_qty": true
    },
    "rounding": {
      "money_decimals": 2
    }
  },
  "stage7": {
    "header_rows_to_scan": 40,
    "seller_from_header_cols": [
      1,
      2
    ],
    "invoice_no_patterns": [
      "([A-Z0-9]+-\\d{6}-\\d{4})",
      ":?(\\d{8})"
    ],
    "date_patterns": [
      "\\b(\\d{4}-\\d{2}-\\d{2})\\b",
      "\\b(\\d{2}/\\d{2}/\\d{4})\\b",
      "Tanggal:?(\\d{4}-\\d{2}-\\d{2})",
      "Tanggal:?(\\d{2}\\.\\d{2}\\.\\d{4})"
    ],
    "po_patterns": [
      "\\bPO[:\\s]*([A-Za-z0-9][A-Za-z0-9\\-\\s/]*\\d[A-Za-z0-9\\-\\s/]*)",
      "PO-\\d{2}-\\d{2}-\\s*\\d{5}[^\\s]*"
    ],
    "customer_code_patterns": [
      "cust\\.?\\s*code[: ]*\\s*([A-Za-z0-9\\-_\\/]+)",
      "customer\\s*code[: ]*\\s*([A-Za-z0-9\\-_\\/]+)",
      "customer\\s*id[: ]*\\s*([A-Za-z0-9\\-_\\/]+)",
      "buyer\\s*id[: ]*\\s*([A-Za-z0-9\\-_\\/]+)",
      ":?(ID\\d{2}/\\d{8})"
    ],
    "payment_terms": {
      "label_contains": [
        "8)PAYMENT TERMS"
      ],
      "include_next_n_rows": 1
    },
    "buyer_block": {
      "start_label_contains": [
        "cust.code:"
      ],
      "stop_when_contains": [
        "9)NO",
        "HS Code", 
        "DESCRIPTION",
        "COL1",
        "NO"
      ],
      "max_lines": 2
    },
    "currency_order": [
      "IDR",
      "USD",
      "EUR"
    ]
  }
}